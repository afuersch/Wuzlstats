@model Wuzlstats.ViewModels.Home.IndexViewModel

<div class="row">
    <div class="col-md-6">
        <h1>@Model.Name league</h1>
        <div class="well">
            @Html.Partial("_Score")
        </div>
    </div>
    <div class="col-md-6">
        <div class="row">
            <div class="col-sm-6">
                <h3>The best players</h3>
                <ul id="bestPlayerRanking"></ul>
            </div>
            <div class="col-sm-6">
                <h3>The worst players</h3>
                <ul id="worstPlayerRanking"></ul>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <h3>The best teams</h3>
                <ul id="bestTeamRanking"></ul>
            </div>
            <div class="col-sm-6">
                <h3>The worst teams</h3>
                <ul id="worstTeamRanking"></ul>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script>
        app.config.init('@Url.Action("Index", "Player", new { id = "[id]" })');

        app.initSignalR();
        app.initScore('@Model.Name');

        app.apiHub.client.reloadStatistics = function () {
            console.log("Refreshing statistics ...");
            app.refreshPlayerRankings();
            app.refreshTeamRankings();
        };

        app.initPlayerRanking($('#bestPlayerRanking'), '@Url.Action("PlayerRanking", "Api", new { league = Model.Name, count = 5 })');
        app.initPlayerRanking($('#worstPlayerRanking'), '@Url.Action("PlayerRanking", "Api", new { league = Model.Name, count = -5 })');

        app.initTeamRanking($('#bestTeamRanking'), '@Url.Action("TeamRanking", "Api", new { league = Model.Name, count = 3 })');
        app.initTeamRanking($('#worstTeamRanking'), '@Url.Action("TeamRanking", "Api", new { league = Model.Name, count = -3 })');

        app.autoPageReload();

        app.connectSignalR('@Model.Name');

    </script>
}