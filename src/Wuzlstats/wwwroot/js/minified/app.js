!function(a,e){a.autoPageReload=function(a){a||(a=9e5);var n=(new Date).getTime();e(document.body).bind("mousemove keypress",function(){n=(new Date).getTime()}),setInterval(function(){(new Date).getTime()-n>=a&&window.location.reload(!0)},1e3)}}(window.app=window.app||{},jQuery),function(a,e){var n,r;a.config={init:function(a,e){n=a,r=e},getPlayerUrl:function(){return n},getPlayersApiEndpoint:function(){return r}}}(window.app=window.app||{},jQuery),function(a,e){a.getLoadingHtml=function(){return e('<div class="progress"><div class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" style="width: 100%"><span class="sr-only">Loading</span></div></div>').html()}}(window.app=window.app||{},jQuery),function(a,e){var n="playerrankingendpointurl";a.initPlayerRanking=function(a,r,i){e(a).data(n,r),e(a).addClass("player-ranking")},a.refreshPlayerRankings=function(){e(".player-ranking").each(function(r,i){i=e(i).addClass("ranking").addClass("player-ranking").html("<li>"+a.getLoadingHtml()+"</li>");var l=i.data(n);e.getJSON(l).fail(function(a,e,n){alert("Player ranking failed to load: "+n+" - "+e)}).done(function(n){i.html(""),e.each(n.players,function(n,r){var l=e("<li />");l.append(e('<a href="'+a.config.getPlayerUrl().replace("[id]",r.id)+'"></a>').append(e("<img />").attr("src","data:image/png;base64,"+r.image).addClass("ranking-image"))),l.append(e("<div />").html(r.name).addClass("ranking-name"));var s=e("<div />").addClass("ranking-score");s.append(e("<span />").html(r.wins).append('<span class="glyphicon glyphicon-thumbs-up" />').addClass("ranking-wins")),s.append(e("<span />").html(r.losses).append('<span class="glyphicon glyphicon-thumbs-down" />').addClass("ranking-losses")),l.append(s),i.append(l)})})})}}(window.app=window.app||{},jQuery),function(a,e){function n(a){var n=e(a).val();return""===n?(e(a).focus(),null):n}a.displayScoreForTwoPlayers=function(){e("#twoPlayersScore").show(),e("#fourPlayersScore").hide(),e("#redTeamScore").val(""),e("#blueTeamScore").val(""),e("#redTeamOffense").val(""),e("#redTeamDefense").val(""),e("#blueTeamOffense").val(""),e("#blueTeamDefense").val("")},a.displayScoreForFourPlayers=function(){e("#twoPlayersScore").hide(),e("#fourPlayersScore").show(),e("#redPlayerScore").val(""),e("#bluePlayerScore").val(""),e("#redPlayer").val(""),e("#bluePlayer").val("")},a.refreshPlayersDatalist=function(n){var r=e("#playersDatalist");n&&r.data("lastrefresh")&&r.data("lastrefresh")>(new Date).getTime()-3e4||e.ajax({type:"GET",url:a.config.getPlayersApiEndpoint()}).fail(function(a,e,n){alert("Loading players failed: "+e)}).done(function(a){r.empty(),e.each(a,function(a,n){r.append(e("<option></option>").html(n))}),r.data("lastrefresh",(new Date).getTime())})},a.initScore=function(r){e("#twoPlayersButton").change(function(){a.displayScoreForTwoPlayers()}),e("#fourPlayersButton").change(function(){a.displayScoreForFourPlayers()}),e(".player").focus(function(){a.refreshPlayersDatalist(!0)});var i=e("#submitScore");i.click(function(){var l=null;if(e("#twoPlayersScore").is(":visible")){var s=n("#redPlayerScore"),o=n("#bluePlayerScore"),t=n("#redPlayer"),d=n("#bluePlayer");s&&o&&t&&d&&(l={redPlayerScore:s,bluePlayerScore:o,redPlayer:t,bluePlayer:d})}else{var p=n("#redTeamScore"),c=n("#blueTeamScore"),f=n("#redTeamOffense"),u=n("#blueTeamOffense"),g=n("#redTeamDefense"),m=n("#blueTeamDefense");p&&c&&f&&u&&g&&m&&(l={redTeamScore:p,blueTeamScore:c,redTeamOffense:f,blueTeamOffense:u,redTeamDefense:g,blueTeamDefense:m})}if(l){var y=e("<div />").html(a.getLoadingHtml());i.after(y),i.hide(),e.ajax({type:"POST",url:r,data:l}).fail(function(a,e,n){alert("Submit score failed: "+e)}).done(function(){e(".player").val(""),e(".score").val(""),a.refreshPlayerRankings(),a.refreshTeamRankings()}).always(function(){i.show(),y.remove(),a.refreshPlayersDatalist(!1)})}})}}(window.app=window.app||{},jQuery),function(a,e){var n="teamrankingendpointurl";a.initTeamRanking=function(a,r){e(a).data(n,r),e(a).addClass("team-ranking")},a.refreshTeamRankings=function(){e(".team-ranking").each(function(r,i){i=e(i).addClass("ranking").addClass("team-ranking").html("<li>"+a.getLoadingHtml()+"</li>");var l=i.data(n);e.getJSON(l).fail(function(a,e,n){alert("Team ranking failed to load: "+n+" - "+e)}).done(function(n){i.html(""),e.each(n.teams,function(n,r){var l=e("<li />");l.append(e('<a href="'+a.config.getPlayerUrl().replace("[id]",r.id1)+'"></a>').append(e("<img />").attr("src","data:image/png;base64,"+r.image1).addClass("ranking-image"))),l.append(e('<a href="'+a.config.getPlayerUrl().replace("[id]",r.id2)+'"></a>').append(e("<img />").attr("src","data:image/png;base64,"+r.image2).addClass("ranking-image"))),l.append(e("<div />").html(r.name1).addClass("ranking-name")),l.append(e("<div />").html(r.name2).addClass("ranking-name"));var s=e("<div />").addClass("ranking-score");s.append(e("<span />").html(r.wins).append('<span class="glyphicon glyphicon-thumbs-up" />').addClass("ranking-wins")),s.append(e("<span />").html(r.losses).append('<span class="glyphicon glyphicon-thumbs-down" />').addClass("ranking-losses")),l.append(s),i.append(l)})})})}}(window.app=window.app||{},jQuery);
//# sourceMappingURL=app.js.map