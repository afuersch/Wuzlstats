!function(e,a){e.autoPageReload=function(e){e||(e=9e5);var n=(new Date).getTime();a(document.body).bind("mousemove keypress",function(){n=(new Date).getTime()}),setInterval(function(){(new Date).getTime()-n>=e&&window.location.reload(!0)},1e3)}}(window.app=window.app||{},jQuery),function(e,a){var n;e.config={init:function(e){n=e},getPlayerUrl:function(){return n}}}(window.app=window.app||{},jQuery),function(e,a){e.getLoadingHtml=function(){return a('<div class="progress"><div class="progress-bar progress-bar-info progress-bar-striped active" role="progressbar" style="width: 100%"><span class="sr-only">Loading</span></div></div>').html()}}(window.app=window.app||{},jQuery),function(e,a){var n="playerrankingendpointurl";e.initPlayerRanking=function(e,i,r){a(e).data(n,i),a(e).addClass("player-ranking")},e.refreshPlayerRankings=function(){a(".player-ranking").each(function(i,r){r=a(r).addClass("ranking").addClass("player-ranking").html("<li>"+e.getLoadingHtml()+"</li>");var o=r.data(n);a.getJSON(o).fail(function(e,a,n){alert("Player ranking failed to load: "+n+" - "+a)}).done(function(n){r.html(""),a.each(n.players,function(n,i){var o=a("<li />");o.append(a('<a href="'+e.config.getPlayerUrl().replace("[id]",i.id)+'"></a>').append(a("<img />").attr("src","data:image/png;base64,"+i.image).addClass("ranking-image"))),o.append(a("<div />").html(i.name).addClass("ranking-name"));var l=a("<div />").addClass("ranking-score");l.append(a("<span />").html(i.wins).append('<span class="glyphicon glyphicon-thumbs-up" />').addClass("ranking-wins")),l.append(a("<span />").html(i.losses).append('<span class="glyphicon glyphicon-thumbs-down" />').addClass("ranking-losses")),o.append(l),r.append(o)})})})}}(window.app=window.app||{},jQuery),function(e,a){function n(e){var n=a(e).val();return""===n?(a(e).focus(),null):n}function i(){var n=a("#playersDatalist");e.apiHub.client.reloadPlayers=function(e){console.log("Refreshing players datalist ..."),n.empty(),a.each(e.players,function(e,i){n.append(a("<option></option>").html(i))})}}e.displayScoreForTwoPlayers=function(){a("#twoPlayersScore").show(),a("#fourPlayersScore").hide(),a("#redTeamScore").val(""),a("#blueTeamScore").val(""),a("#redTeamOffense").val(""),a("#redTeamDefense").val(""),a("#blueTeamOffense").val(""),a("#blueTeamDefense").val("")},e.displayScoreForFourPlayers=function(){a("#twoPlayersScore").hide(),a("#fourPlayersScore").show(),a("#redPlayerScore").val(""),a("#bluePlayerScore").val(""),a("#redPlayer").val(""),a("#bluePlayer").val("")},e.initScore=function(r){i(r),e.apiHub.client.scorePosted=function(){e.apiHub.server.reloadPlayersForGroup(r),console.log("Score posted.")},a("#twoPlayersButton").change(function(){e.displayScoreForTwoPlayers()}),a("#fourPlayersButton").change(function(){e.displayScoreForFourPlayers()});var o=a("#submitScore");o.click(function(){var i=null;if(a("#twoPlayersScore").is(":visible")){var l=n("#redPlayerScore"),s=n("#bluePlayerScore"),t=n("#redPlayer"),d=n("#bluePlayer");l&&s&&t&&d&&(i={redPlayerScore:l,bluePlayerScore:s,redPlayer:t,bluePlayer:d})}else{var p=n("#redTeamScore"),c=n("#blueTeamScore"),u=n("#redTeamOffense"),g=n("#blueTeamOffense"),f=n("#redTeamDefense"),m=n("#blueTeamDefense");p&&c&&u&&g&&f&&m&&(i={redTeamScore:p,blueTeamScore:c,redTeamOffense:u,blueTeamOffense:g,redTeamDefense:f,blueTeamDefense:m})}if(i){var y=a("<div />").html(e.getLoadingHtml());o.after(y),o.hide(),e.apiHub.server.postScore(r,i).done(function(){a(".player").val(""),a(".score").val("")}).always(function(){o.show(),y.remove()}).fail(function(e){alert("Post score failed.\n\n"+e)})}})}}(window.app=window.app||{},jQuery),function(e,a){var n=null;e.initSignalR=function(){e.apiHub=a.connection.apiHub,e.apiHub.client.leagueJoined=function(e){console.log("League "+e+" joined.")},e.apiHub.client.reloadStatistics=function(){console.log("relead stats, but from league hub.")}},e.connectSignalR=function(i){console.log("Connecting to SignalR ..."),a.connection.hub.start().done(function(){n&&e.apiHub.server.leaveLeague(n),e.apiHub.server.joinLeague(i).done(function(){console.log("League "+i+" joined.")})})},e.apiHub=null}(window.app=window.app||{},jQuery),function(e,a){var n="teamrankingendpointurl";e.initTeamRanking=function(e,i){a(e).data(n,i),a(e).addClass("team-ranking")},e.refreshTeamRankings=function(){a(".team-ranking").each(function(i,r){r=a(r).addClass("ranking").addClass("team-ranking").html("<li>"+e.getLoadingHtml()+"</li>");var o=r.data(n);a.getJSON(o).fail(function(e,a,n){alert("Team ranking failed to load: "+n+" - "+a)}).done(function(n){r.html(""),a.each(n.teams,function(n,i){var o=a("<li />");o.append(a('<a href="'+e.config.getPlayerUrl().replace("[id]",i.id1)+'"></a>').append(a("<img />").attr("src","data:image/png;base64,"+i.image1).addClass("ranking-image"))),o.append(a('<a href="'+e.config.getPlayerUrl().replace("[id]",i.id2)+'"></a>').append(a("<img />").attr("src","data:image/png;base64,"+i.image2).addClass("ranking-image"))),o.append(a("<div />").html(i.name1).addClass("ranking-name")),o.append(a("<div />").html(i.name2).addClass("ranking-name"));var l=a("<div />").addClass("ranking-score");l.append(a("<span />").html(i.wins).append('<span class="glyphicon glyphicon-thumbs-up" />').addClass("ranking-wins")),l.append(a("<span />").html(i.losses).append('<span class="glyphicon glyphicon-thumbs-down" />').addClass("ranking-losses")),o.append(l),r.append(o)})})})}}(window.app=window.app||{},jQuery);
//# sourceMappingURL=app.js.map